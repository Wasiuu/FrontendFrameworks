(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{59242:(e,a,t)=>{Promise.resolve().then(t.bind(t,61727))},61727:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(95155),n=t(12115),r=t(91746),d=t(1788),i=t(27058);async function l(e,a){if(!a)return[];let t=e.toDateString(),s=(0,i.P)((0,i.rJ)(r.db,"tasks"),(0,i._M)("date","==",t),(0,i._M)("ownerId","==",a));try{let e=(await (0,i.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));return console.log("Pobrane zadania:",e),e}catch(e){return console.error("Błąd podczas pobierania zadań:",e),[]}}var c=t(81996),o=t.n(c);function u(e){let{tasks:a,selectedDate:t,onEdit:n,onDelete:r}=e;console.log("Dane tasks w TaskList:",a);let d=a[t.toDateString()]||[];return console.log("Zadania dla daty w TaskList:",d),(0,s.jsxs)("div",{className:"task-list",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Zadania na ",t.toDateString()]}),0===d.length?(0,s.jsx)("p",{className:"text-gray-500",children:"Brak zadań na wybrany dzień."}):(0,s.jsx)("ul",{className:"list-none pl-0 space-y-2",children:d.map(e=>(0,s.jsxs)("li",{className:"p-4 border rounded flex justify-between items-center bg-white shadow-md",children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>n(e),className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Edytuj"}),(0,s.jsx)("button",{onClick:()=>r(e),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Usuń"})]})]},e.id))})]})}function m(e){let{isOpen:a,closeModal:t,selectedDate:n,addTask:r}=e;return a?(0,s.jsx)("div",{className:"modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Dodaj zadanie"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=e.target.taskName.value.trim();a&&(r({name:a,date:n.toDateString()}),t())},children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"taskName",className:"block text-gray-700 font-bold mb-2",children:"Nazwa zadania:"}),(0,s.jsx)("input",{type:"text",id:"taskName",name:"taskName",className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",placeholder:"Wpisz nazwę zadania",required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"Anuluj"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition",children:"Dodaj"})]})]})]})}):null}u.propTypes={tasks:o().objectOf(o().arrayOf(o().shape({id:o().oneOfType([o().string,o().number]).isRequired,name:o().string.isRequired}))).isRequired,selectedDate:o().instanceOf(Date).isRequired,onEdit:o().func.isRequired,onDelete:o().func.isRequired},m.propTypes={isOpen:o().bool.isRequired,closeModal:o().func.isRequired,selectedDate:o().instanceOf(Date).isRequired,addTask:o().func.isRequired};var x=t(40842),p=t.n(x),b=t(76046);function h(){(0,b.useRouter)();let{user:e,loading:a}=(0,d.A)(),[t,c]=(0,n.useState)(!1),[o,x]=(0,n.useState)(null),[h,f]=(0,n.useState)({}),[y,g]=(0,n.useState)(new Date),j=(0,n.useCallback)(async()=>{try{if(!e)return;let a=(await l(y,e.uid)).reduce((e,a)=>{let t=a.date;return e[t]||(e[t]=[]),e[t].push(a),e},{});f(a)}catch(e){console.error("Błąd pobierania zadań:",e)}},[y,e]);if((0,n.useEffect)(()=>{!a&&e&&j()},[a,e,j]),!a&&!e)return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Musisz być zalogowany, aby zobaczyć tę stronę."})});let w=async a=>{try{let t=y.toDateString();o?await (0,i.mZ)((0,i.H9)(r.db,"tasks",o.id),{name:a.name,date:t,ownerId:e.uid}):await (0,i.gS)((0,i.rJ)(r.db,"tasks"),{name:a.name,date:t,ownerId:e.uid}),await j(),c(!1),x(null)}catch(e){console.error("Błąd przy dodawaniu/edycji zadania:",e)}},k=async e=>{try{await (0,i.kd)((0,i.H9)(r.db,"tasks",e.id)),await j()}catch(e){console.error("Błąd przy usuwaniu zadania:",e)}};return h[y.toDateString()],(0,s.jsxs)("div",{className:"container flex flex-col items-center justify-center min-h-screen p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"card w-full max-w-lg md:max-w-4xl text-center",children:[(0,s.jsx)("h2",{className:"text-2xl md:text-4xl font-bold text-primary mb-6",children:"Kalendarz"}),(0,s.jsx)(p(),{selected:y,onChange:e=>g(e),dateFormat:"yyyy-MM-dd",className:"border p-2 rounded mb-4 w-full max-w-xs md:max-w-sm"}),(0,s.jsx)(u,{tasks:h,selectedDate:y,onEdit:e=>{x(e),c(!0)},onDelete:k}),(0,s.jsx)("button",{onClick:()=>c(!0),className:"button mt-6 bg-blue-500 text-white py-2 px-4 rounded",children:"Dodaj zadanie"})]}),(0,s.jsx)(m,{isOpen:t,closeModal:()=>{c(!1),x(null)},selectedDate:y,addTask:w,editingTask:o})]})}function f(){let[e,a]=(0,n.useState)({});return(0,s.jsx)("div",{className:"p-4 md:p-6 flex flex-col items-center",children:(0,s.jsx)(h,{tasks:e,setTasks:e=>{a(e)},currentDate:new Date})})}t(35279)},1788:(e,a,t)=>{"use strict";t.d(a,{A:()=>u,O:()=>o});var s=t(95155),n=t(81996),r=t.n(n),d=t(12115),i=t(14565),l=t(91746);let c=(0,d.createContext)(),o=e=>{let{children:a}=e,[t,n]=(0,d.useState)(null),[r,o]=(0,d.useState)(!0);(0,d.useEffect)(()=>{let e=(0,i.hg)(l.j,e=>{n(e),o(!1)});return()=>e()},[]);let u=(0,d.useMemo)(()=>({user:t,loading:r}),[t,r]);return(0,s.jsx)(c.Provider,{value:u,children:a})};o.propTypes={children:r().node.isRequired};let u=()=>(0,d.useContext)(c)},91746:(e,a,t)=>{"use strict";t.d(a,{db:()=>i,j:()=>l});var s=t(49904),n=t(27058),r=t(14565);let d=(0,s.Wp)({apiKey:"AIzaSyCR9zDCQ0gg9M8hln8kbUNG7FHojLZls2g",authDomain:"frontendapp - 1c63a.firebaseapp.com",projectId:"frontendapp-1c63a",storageBucket:"frontendapp-1c63a.firebasestorage.app",messagingSenderId:"725446194373",appId:"1:725446194373:web:eb1c98752279ba8a1a2cac",measurementId:"G-Y5WB1JE9EV"}),i=(0,n.aU)(d),l=(0,r.xI)(d)}},e=>{var a=a=>e(e.s=a);e.O(0,[302,992,782,915,861,56,441,517,358],()=>a(59242)),_N_E=e.O()}]);